/**************************** USER TAB VALIDATION *****************************/
/* The autogen defines its own `onClickUserLogin` function. This is           */
/* overridden using @POSTPROC.                                                */
/******************************************************************************/

void onClickUserLogin () {
  String refUsers      = userMenuPath; // Defined by autogen
  String refDeviceCode = "User/User_List/Device_Code";

  String vocabIdUsers      = getFieldValue(refUsers);
  String vocabIdDeviceCode = getFieldValue(refDeviceCode);

  Boolean isSelectedUsers      = !isNull(vocabIdUsers);
  Boolean isSelectedDeviceCode = !isNull(vocabIdDeviceCode);

  if (!isSelectedUsers)      { noUsersSelected();      return; }
  if (!isSelectedDeviceCode) { noDeviceCodeSelected(); return; }

  newTab("Control", true);
}

void noUsersSelected() {
  String msgHead = "No User selected";
  String msgBody = "A User must be selected in order to log in.";
  showWarning(msgHead, msgBody);
}

void noDeviceCodeSelected() {
  msgHead = "No {Device_Code} Selected";
  msgBody = "A {Device_Code} must be selected in order to log in.";
  showWarning(msgHead, msgBody);
}
